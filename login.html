<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™»å½• - å†å²ç ”ç©¶æ•°æ®åº“</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    
    <!-- ç•Œé¢è½¬åœºæ•ˆæœ -->
    <link rel="stylesheet" href="transitions.css">
    
    <style>
        /* ä¿ç•™ä¸ä¸»é¡µé¢ä¸€è‡´çš„é…è‰²æ–¹æ¡ˆ */
        :root {
            --base-1: #FFF7F1;
            --base-2: #FFE4C9;
            --accent-1: #E78895;
            --accent-2: #BED1CF;
            --text-primary: #8C454F;
            --text-secondary: #4F6B68;
            --radius-medium: 16px;
            --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, var(--base-1) 0%, var(--base-2) 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .auth-container {
            display: flex;
            width: 100%;
            max-width: 1000px;
            min-height: 600px;
            background: white;
            border-radius: var(--radius-medium);
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(140, 69, 79, 0.15);
        }

        .auth-left {
            flex: 1;
            background: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 60px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .auth-left::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }

        .auth-left h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .auth-left p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 30px;
            max-width: 500px;
            position: relative;
            z-index: 1;
        }

        .auth-right {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 60px;
            background: white;
        }

        .auth-form {
            width: 100%;
            max-width: 400px;
        }

        .auth-form h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 30px;
            color: var(--text-primary);
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-primary);
            font-weight: 500;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 14px 18px;
            border-radius: var(--radius-medium);
            border: 1px solid rgba(140, 69, 79, 0.2);
            background: white;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.4s var(--ease-smooth);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-1);
            box-shadow: 0 0 0 2px rgba(231, 136, 149, 0.2);
        }

        .btn {
            padding: 12px 24px;
            border-radius: var(--radius-medium);
            cursor: pointer;
            transition: all 0.4s var(--ease-smooth);
            font-weight: 600;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: none;
            outline: none;
            text-decoration: none;
            width: 100%;
            margin-bottom: 12px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 100%);
            color: white;
            border: none;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(231, 136, 149, 0.3);
        }

        .btn-outline {
            background: white;
            color: var(--accent-1);
            border: 2px solid var(--accent-1);
        }

        .btn-outline:hover {
            background: var(--accent-1);
            color: white;
        }

        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 247, 241, 0.9);
            z-index: 1000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .spinner {
            border: 4px solid rgba(231, 136, 149, 0.2);
            border-radius: 50%;
            border-top: 4px solid var(--accent-1);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            color: #ff4444;
            font-size: 14px;
            text-align: center;
            margin-top: 10px;
            display: none;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .feature-text h3 {
            margin-bottom: 5px;
        }

        .feature-text p {
            opacity: 0.8;
            font-size: 14px;
            margin: 0;
        }

        @media (max-width: 768px) {
            .auth-container {
                flex-direction: column;
                min-height: auto;
            }
            
            .auth-left {
                padding: 40px 20px;
            }
            
            .auth-right {
                padding: 40px 20px;
            }
            
            .auth-left h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Liquid Glass SVG Filters (hidden defs) -->
    <svg class="liquid-glass-svg-defs" aria-hidden="true" focusable="false">
        <filter id="liquidGlassDistortion" x="-30%" y="-30%" width="160%" height="160%">
            <feTurbulence type="fractalNoise" baseFrequency="0.012 0.018" numOctaves="2" seed="2" result="noise">
                <animate attributeName="baseFrequency" dur="10s"
                         values="0.012 0.018; 0.018 0.012; 0.012 0.018" repeatCount="indefinite" />
                <animate attributeName="seed" dur="12s"
                         values="2; 8; 2" repeatCount="indefinite" />
            </feTurbulence>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="18"
                               xChannelSelector="R" yChannelSelector="G" />
        </filter>
    </svg>
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <div id="loadingText" style="margin-top: 15px; color: var(--text-primary);">æ­£åœ¨éªŒè¯...</div>
    </div>

    <div class="auth-container auth-page-enter">
        <div class="auth-left">
            <h1>å†å²ç ”ç©¶æ•°æ®åº“</h1>
            <p>æ¢ç´¢è¿‡å»çš„æ™ºæ…§ï¼Œæ„å»ºæœªæ¥çš„çŸ¥è¯†ã€‚ä¸€ä¸ªä¸“ä¸ºå†å²ç ”ç©¶è€…è®¾è®¡çš„ç°ä»£åä½œå¹³å°ã€‚</p>
            
            <div style="margin-top: 40px;">
                <div class="feature-item">
                    <div class="feature-icon">ğŸ“š</div>
                    <div class="feature-text">
                        <h3>æ™ºèƒ½åˆ†ç±»</h3>
                        <p>è‡ªåŠ¨æ•´ç†å†å²èµ„æ–™ä¸æ–‡çŒ®</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">ğŸ¤</div>
                    <div class="feature-text">
                        <h3>å›¢é˜Ÿåä½œ</h3>
                        <p>ä¸åŒäº‹æ— ç¼åä½œç ”ç©¶é¡¹ç›®</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">ğŸ”’</div>
                    <div class="feature-text">
                        <h3>å®‰å…¨å­˜å‚¨</h3>
                        <p>æ‚¨çš„ç ”ç©¶æ•°æ®å®‰å…¨å¯é </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="auth-right">
            <div class="auth-form">
                <h2>æ¬¢è¿å›æ¥</h2>
                <div id="errorMessage" class="error-message"></div>
                <div class="form-group">
                    <label class="form-label">ç”µå­é‚®ç®±</label>
                    <input type="email" id="emailInput" class="form-input" placeholder="your.email@example.com">
                </div>
                <div class="form-group">
                    <label class="form-label">å¯†ç </label>
                    <input type="password" id="passwordInput" class="form-input" placeholder="è¾“å…¥æ‚¨çš„å¯†ç ">
                </div>
                <button onclick="handleLogin()" class="btn btn-primary btn-transition">
                    <i class="fas fa-sign-in-alt"></i> ç«‹å³ç™»å½•
                </button>
                <button onclick="handleSignUp()" class="btn btn-outline btn-transition">
                    <i class="fas fa-user-plus"></i> æ³¨å†Œæ–°è´¦æˆ·
                </button>
                <div style="text-align: center; margin-top: 20px;">
                    <a href="#" onclick="sendPasswordReset()" style="color: var(--text-secondary); font-size: 14px; text-decoration: none;">
                        <i class="fas fa-key"></i> å¿˜è®°å¯†ç ï¼Ÿ
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebaseé…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyC5zQ6We55GvT8xexlQOLPpoTZip9Xac9k",
            authDomain: "slsj-54760.firebaseapp.com",
            databaseURL: "https://slsj-54760-default-rtdb.firebaseio.com",
            projectId: "slsj-54760",
            storageBucket: "slsj-54760.firebasestorage.app",
            messagingSenderId: "890890573955",
            appId: "1:890890573955:web:328c0ed09af23d634b23b6"
        };

        // åˆå§‹åŒ–Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ç™»å½•çŠ¶æ€
        document.addEventListener('DOMContentLoaded', function() {
            // éšè—åŠ è½½åŠ¨ç”»
            document.getElementById('loading').style.display = 'none';
            
            // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•
            auth.onAuthStateChanged(user => {
                if (user) {
                    // ç”¨æˆ·å·²ç™»å½•ï¼Œè§¦å‘é€€å‡ºè½¬åœºåè·³è½¬åˆ°ä¸»é¡µé¢
                    const authContainer = document.querySelector('.auth-container');
                    if (authContainer) {
                        authContainer.classList.remove('auth-page-enter');
                        authContainer.classList.add('auth-page-exit');
                    }
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 500);
                } else {
                    // ç”¨æˆ·æœªç™»å½•ï¼Œæ˜¾ç¤ºç™»å½•ç•Œé¢ï¼ˆè½¬åœºæ•ˆæœå·²åœ¨HTMLä¸­è®¾ç½®ï¼‰
                }
            });
        });

        function showLoading(message = 'å¤„ç†ä¸­...') {
            document.getElementById('loadingText').textContent = message;
            document.getElementById('loading').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        function showError(message) {
            const errorEl = document.getElementById('errorMessage');
            errorEl.textContent = message;
            errorEl.style.display = 'block';
            setTimeout(() => {
                errorEl.style.display = 'none';
            }, 5000);
        }

        async function handleLogin() {
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;
            
            if (!email || !password) {
                showError('è¯·è¾“å…¥é‚®ç®±å’Œå¯†ç ');
                return;
            }
            
            try {
                showLoading('æ­£åœ¨ç™»å½•...');
                await auth.signInWithEmailAndPassword(email, password);
                // ç™»å½•æˆåŠŸï¼Œè·³è½¬å°†ç”±onAuthStateChangedå¤„ç†
            } catch (error) {
                hideLoading();
                handleAuthError(error);
            }
        }

        async function handleSignUp() {
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;
            
            if (!email || !password) {
                showError('è¯·è¾“å…¥é‚®ç®±å’Œå¯†ç ');
                return;
            }
            
            if (password.length < 6) {
                showError('å¯†ç è‡³å°‘éœ€è¦6ä½å­—ç¬¦');
                return;
            }
            
            try {
                showLoading('æ­£åœ¨æ³¨å†Œ...');
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                // æ³¨å†ŒæˆåŠŸï¼Œè·³è½¬å°†ç”±onAuthStateChangedå¤„ç†
            } catch (error) {
                hideLoading();
                handleAuthError(error);
            }
        }

        async function sendPasswordReset() {
            const email = document.getElementById('emailInput').value;
            if (!email) {
                showError('è¯·å…ˆè¾“å…¥æ‚¨çš„ç”µå­é‚®ç®±');
                return;
            }
            try {
                showLoading('æ­£åœ¨å‘é€é‡ç½®é‚®ä»¶...');
                await auth.sendPasswordResetEmail(email);
                hideLoading();
                alert('å¯†ç é‡ç½®é‚®ä»¶å·²å‘é€ï¼Œè¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±');
            } catch (error) {
                hideLoading();
                handleAuthError(error);
            }
        }

        function handleAuthError(error) {
            const errorMap = {
                'auth/invalid-email': 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®',
                'auth/user-disabled': 'è´¦æˆ·å·²è¢«ç¦ç”¨',
                'auth/user-not-found': 'è¯¥é‚®ç®±æœªæ³¨å†Œ',
                'auth/wrong-password': 'å¯†ç é”™è¯¯',
                'auth/email-already-in-use': 'é‚®ç®±å·²è¢«æ³¨å†Œ',
                'auth/operation-not-allowed': 'æ“ä½œä¸è¢«å…è®¸',
                'auth/weak-password': 'å¯†ç éœ€è‡³å°‘6ä½',
                'auth/network-request-failed': 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ'
            };
            showError(errorMap[error.code] || `æ“ä½œå¤±è´¥: ${error.message}`);
        }

        // å…è®¸å›è½¦é”®ç™»å½•
        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleLogin();
            }
        });
    </script>
    
    <!-- Font Awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
</body>
</html>
